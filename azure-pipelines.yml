
trigger:
- main

pool:
  default

steps:

- checkout: self

- task: AzureResourceManagerTemplateDeployment@3
  inputs:
    deploymentScope: 'Resource Group'
    azureResourceManagerConnection: 'newServiceConnection'
    subscriptionId: '40af5fd9-94c4-430a-9f3c-cf02ddd543ec'
    action: 'Create Or Update Resource Group'
    resourceGroupName: 'RG_test'
    location: 'West Europe'
    templateLocation: 'URL of the file'
    csmFileLink: 'https://raw.githubusercontent.com/esha-assignment/ARM-Pipeline-Repo/refs/heads/main/template.json'
    csmParametersFileLink: 'https://raw.githubusercontent.com/esha-assignment/ARM-Pipeline-Repo/refs/heads/main/parameters.json'
    overrideParameters: |
      storageAccountName=$(storageAccountName)
      sku=$(sku)
    deploymentMode: 'Complete'
    deploymentName: 'stgacc123'

